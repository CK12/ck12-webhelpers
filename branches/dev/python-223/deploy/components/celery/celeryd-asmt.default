## Place this file (or symlink it) under /etc/default/celeryd-asmt
# Where to chdir at start.
CELERYD_BIN="/usr/local/bin/celeryd"
[ -f "/opt/env/asmt/bin/celeryd" ] && CELERYD_BIN="/opt/env/asmt/bin/celeryd"
CELERYD_CHDIR="/opt/2.0/assessment/engine/pyramid"

# Extra arguments to celeryd
CELERYD_OPTS_GRP1="--queues print-asmt,data-asmt -c 3"
re='[^0-9]+$'
THIS_HOST="$(hostname)"
THIS_HOST="${THIS_HOST%%.ck12.org}"
if [ "${THIS_HOST%%1}" != "${THIS_HOST}" ] || [[ ${THIS_HOST} =~ ${re} ]]; then
    CELERYD_OPTS_GRP1="${CELERYD_OPTS_GRP1} -B --schedule=/var/run/celery/celerybeat-asmt-schedule"
fi

CELERYD_LOG_FILE="/var/log/celery/celeryd-asmt-_n.log"

CELERYD_LOG_LEVEL="INFO"

# Workers should run as an unprivileged user.
CELERYD_USER=`grep -s APACHE_RUN_USER /etc/apache2/envvars |sed 's/export APACHE_RUN_USER=//'`
CELERYD_USER=${CELERYD_USER:-www-data}
CELERYD_GROUP=`grep -s APACHE_RUN_GROUP /etc/apache2/envvars |sed 's/export APACHE_RUN_GROUP=//'`
CELERYD_GROUP=${CELERYD_GROUP:-www-data}

# PAth to celeryd
#CELERYD="/usr/local/bin/paster celeryd celeryconfig.py"

# Name of the celery config module.#
CELERY_CONFIG_MODULE="celeryconfig-assessment"
