{% set artifacts = c.paginator.current_page.items() %}
{% extends "mylibrary/common.html" %}

{% block title %}{{ _("Bookmarks") }}{% endblock %}

{% block js %}
	{{ super() }}
	<script>
	var items_json = [];
	{% if c.labels_json %}
	var labels_json = {{c.labels_json}};
	{% else %}
	var labels_json = []
	{% endif %}

	{% if c.selected_label %}
	var selected_label = "{{c.selected_label}}";
	{% endif %}
</script>
{% endblock %}

{% block dashboard_titles %}{{ _("Bookmarks") }}{% endblock %}

{% block top_actions %}
	<div class="prefix_2 grid_2">
		<a class="button turquoise" id="changeLabels" href="#" title="{{ _('Change Labels') }}">{{ _('Change Labels') }}</a>
	</div>
{% endblock %}

{% block results_area %} 
	{% for artifact in artifacts %}
	<ul id="item_{{artifact.get_revision_id()}}" class="rowlist js_library_row clearfix">
		<li><input class="js_row_check" type="checkbox"></li>
		{% if artifact.is_flexbook() %}
		<li><img class="imgborder" src="{{ artifact|ck12_artifact_cover_thumbnail_small }}" alt="{{ artifact.title|escape }}" title="{{ artifact.title|escape }}" width="30" height="40"/></li>
		{% else %}
		<li><div class="missingimage"></div></li>
		{% endif %}
		<li class="libraryartifacttitle">
			<a href="{{ h.artifact_url(artifact) }}">{{ artifact.title|escape }}</a> - <span class="artifacttype">{{ artifact.display_label() }}</span>
			<div class="js_artifact_labels">
				{% for label in artifact.getLibraryLabels() %}
				<span data-label="{{label}}" class="labels">
					{{label|truncate(20,killwords=true)|escape}}
				</span>
				{% endfor %}
			</div>
		</li>
		<li class="actions">
			<a href="#" class="js_remove_starred" title="{{ _('Remove from your Bookmarks') }}">
				<span class="icon-close"></span>
			</a>
		</li>
		<div class="divider"></div>
	</ul>
	{% endfor %}
{% endblock %}

{% block hidden_divs %}
{{ super() }}
<div id="items_json_data">
	{{ artifacts|ck12_json|escape }}
</div>
{% endblock %}
