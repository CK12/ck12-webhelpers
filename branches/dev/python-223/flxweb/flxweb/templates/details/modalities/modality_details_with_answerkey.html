{% extends "details/modalities/modality_details_generic.html" %}
{% from "macros/attachments.html" import ck12_resources_tab with context %}
{% set resource = c.modality_data.artifact.get_modality_resource() %}
{% block modality_js %}
<script language="JavaScript" type="text/javascript">
    var artifactID = '{{c.modality_data.artifact.get_artifact_id()}}';
    var artifactRevisionID = '{{c.modality_data.artifact.get_revision_id()}}';
    var standardBoards = "";
    require(['main'],function(){
        require(['flxweb.details.modality.read']);
    });
    //var modality_type = '{{c.modality_data.artifact.get('artifactType')}}';
</script>

{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" href="{{ h.url_css('noty_theme_twitter.css') }}" />
<link rel="stylesheet" type="text/css" href="{{ h.url_css('jquery.noty.css') }}" />
{{ super() }}
{% endblock %}

{% block meta_extra %}
{{ super() }}
<meta property="og:title" content="{{ c.domain.name|escape }}" />
<meta property="og:type" content="website" />
<meta property="og:image" content="{{ c.modality_data.artifact.get('coverImageThumbLarge') }}" />
<meta property="og:url" content="{{ h.url(c.page_url, qualified=True) }}" />
<meta property="og:description" content="{{ c.modality_data.artifact.summary }}" />
{% endblock %}

{% block modality_actions %}
<ul>
	{% if c.modality_data.artifact.artifactType == 'lesson' or c.modality_data.artifact.artifactType == 'lecture' or c.modality_data.artifact.artifactType == 'enrichment' %}
	<li class="modality-info assign-to-class hide hide-for-lti-context"> <a title="Assign to Class" class="assign_to_class">Assign to Class</a><span class="assign-info-img icon-Info"></span><div id="reveal-overlay" class="reveal-modal-bg"></div></li>	<!-- This change is for VIDEO MODALITY -->
	<li class="modality-info hide show-for-lti-context"> <a title="Create Assignment" class="assign_to_lms">Create Assignment</a><span class="assign-info-img icon-Info"></span></li>
	{% endif %}
	{% if c.modality_data_json.artifact.revisionInLibrary == None %}
		<li> <a id="add_to_library" title="Add to Library"> Add to Library </a> </li>
	{% else %}
		<li> <a class="already_in_library" title="Already in Library"> Add to Library </a> </li>
	{% endif %}
	<li class="hide-for-lti-context"> <a class="js-shareGroupLink" data-sharetype="group" data-artifactID="{{ c.modality_data.artifact.id }}" title="{{ _('Share via Groups') }}">Share to Groups</a> </li>
    {% if c.show_details %}<li> {{ ck12_modality_details( c.modality_data.artifact ) }} </li>{% endif %}
    {% if not c.modality_data.boxviewer_session_id %}
        <li> {{ ck12_modality_resources( c.modality_data.artifact ) }} </li>
    {% endif %}
    {% if c.modality_data_json.downloaduri %}
        <li class="hide-for-lti-context"> <a id="download_studyguide" class="{% if not c.user %}js_signinrequired{% endif %}" title="Download" href="{{c.modality_data_json.downloaduri}}"> Download </a> </li>
    {% endif %}
</ul>
{% endblock %}

{% block after_metadata %}
{{ super() }}
{% block resources %}
{% if not c.modality_data.boxviewer_session_id %}
    <div class="clear"></div>
    <div class="resourcesview hide-for-small">
        <h3 class=" js_block_toggle js_resources_toggle" data-toggle=".js_resources_toggle" data-container=".js_resources_container">
            <span class="show">{{ _('Show') }}</span><span class="noshow hide">{{ _('Hide') }}</span> {{ _('Resources') }} <span class="tip"></span>
        </h3>
        <div class="divider thin"></div>
        <div class="js_resources_container" style="display: none">
            <!-- Resources -->
            {{ ck12_resources_tab(c.modality_data.artifact, c.user, loadlater='clickload') }}
        </div>
    </div>
{% endif %}
{% endblock %}
{% endblock %}
