tinymce.PluginManager.add("ck12advlist",function(a){function f(a,b){var c=[];return tinymce.each(b.split(/[ ,]/),function(a){c.push({text:a.replace(/\-/g," ").replace(/\b\w/g,function(a){return a.toUpperCase()}),data:"default"==a?"":a})}),c}function g(b,c){a.undoManager.transact(function(){var d,i,j,k,l,m,f=a.dom,g=a.selection;if(k=g.getNode(),d=f.getParent(k,"ol,ul"),d&&d.nodeName==b&&c!==!1||(l="UL"==b?"InsertUnorderedList":"InsertOrderedList",m=f.select("dl",d),m.length?(m=h(m,"p"),a.execCommand(l),h(m,"dl")):a.execCommand(l)),c=c===!1?e[b]:c,e[b]=c,d=f.getParent(g.getNode(),"ol,ul"),d&&(f.setStyle(d,"listStyleType",c?c:null),d.removeAttribute("data-mce-style")),d)for(var n=d.childNodes.length-1;n>=0;n--)i=d.childNodes[n].firstChild,i&&"SPAN"===i.tagName&&!i.className&&(j=i.innerHTML,i.parentNode.insertAdjacentHTML("afterbegin",j),f.remove(i));a.focus()})}function h(b,c){var d=[];return b.forEach(function(b){d.push(a.dom.rename(b,c))}),d}function i(b){var c=a.dom.getStyle(a.dom.getParent(a.selection.getNode(),"ol,ul"),"listStyleType")||"";b.control.items().each(function(a){a.active(a.settings.data===c)})}var b,c,d,e={};a.settings.ck12_plugins_url&&(d=a.settings.ck12_plugins_url+"ck12advlist"),b=f("OL",a.getParam("advlist_number_styles","default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman")),c=f("UL",a.getParam("advlist_bullet_styles","default,circle,disc,square")),a.addCommand("mceChangeStartOfList",function(){var b=a.selection;b.isCollapsed()&&!a.dom.getParent(b.getNode(),"OL")||(a.undoManager.add(),a.windowManager.open({title:"Edit Start of the List",file:d+"/listedit.htm",width:310+parseInt(a.getLang("advlink.link_delta_width",0)),height:115+parseInt(a.getLang("advlink.link_delta_height",0)),inline:!0},{plugin_url:d}))});var j={postRender:function(a){function c(){var c,d,e,f;c=a.selection,d=c.getNode()||a.getBody(),e=a.dom.getParent(d,"ol"),f=!(!e||"LI"!==d.nodeName),b.disabled(!f),b.visible(f)}function d(){a.on("contextmenu:postrender",c)}var b=this;a.initialized?d():a.on("init",d)}};a.addMenuItem("numlistCM",{icon:"numlist",text:"Edit Start of List",onPostRender:function(){j.postRender.call(this,a)},cmd:"mceChangeStartOfList",context:"insert",prependToContext:!0}),a.addButton("numlist",{type:"splitbutton",tooltip:"Add/Edit Numbered list",menu:b,onshow:i,onselect:function(a){g("OL",a.control.settings.data)},onclick:function(){g("OL",!1)}}),a.addButton("bullist",{type:"splitbutton",tooltip:"Add/Edit Bulleted list",menu:c,onshow:i,onselect:function(a){g("UL",a.control.settings.data)},onclick:function(){g("UL",!1)}})});