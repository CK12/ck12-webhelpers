!function(){tinymce.create("tinymce.plugins.MathImagePlugin",{init:function(a,b){function c(a){return/^(x-ck12-block-math|x-ck12-math)$/.test(a.className)}a.addCommand("mceMathImage",function(){var c=a.selection.getNode();("IMG"!=c.nodeName||-1==a.dom.getAttrib(c,"class").indexOf("mceItem")&&(-1!=a.dom.getAttrib(c,"class").indexOf("x-ck12-block-math")||-1!=a.dom.getAttrib(c,"class").indexOf("x-ck12-math")))&&a.windowManager.open({file:b+"/symboleditor.htm",width:800+parseInt(a.getLang("advimage.delta_width",0)),height:550+parseInt(a.getLang("advimage.delta_height",0)),inline:1},{plugin_url:b})}),a.addButton("mathimage",{title:"Insert / Edit Math Equation",cmd:"mceMathImage",image:b+"/img/icon_math.gif"}),a.onNodeChange.add(function(a,b,d){b.setActive("mathimage","IMG"==d.nodeName&&c(d))}),a.onInit.add(function(){a&&a.plugins.contextmenu&&a.plugins.contextmenu.onContextMenu.add(function(b,d,e){var f=a.selection,g=f.getNode()||a.getBody();a.dom.getParent(e,"div");c(g)&&(d.removeAll(),d.add({title:"Edit equation",icon:"image",cmd:"mceMathImage",ui:!0}))})})},getInfo:function(){return{longname:"Math Expression Image",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/mathimage",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("mathimage",tinymce.plugins.MathImagePlugin)}();