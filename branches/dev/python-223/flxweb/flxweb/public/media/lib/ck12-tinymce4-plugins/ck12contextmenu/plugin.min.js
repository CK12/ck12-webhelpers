tinymce.PluginManager.add("ck12contextmenu",function(a){"use strict";function b(){var b=[],c=a.settings.contextmenu||"link image inserttable | cell row column deletetable";tinymce.each(c.split(/[ ,]/),function(c){var d=a.menuItems[c];"|"===c&&(d={text:c}),d&&(d.shortcut="",b.push(d))});for(var d=0;d<b.length;d++)"|"===b[d].text&&(0===d||d===b.length-1)&&b.splice(d,1);return f=new tinymce.ui.Menu({items:b,context:"contextmenu",classes:"contextmenu",onhide:function(){!f.visible()&&g&&(e(),g=null)},preRender:function(){f.show().hide()}}),a.on("remove",function(){f.remove(),f=null}),f.renderTo().show()}function c(){var a,b=f._items,c=g.hasOwnProperty("enable")?"enable":"disable";for(var e in b)b.hasOwnProperty(e)&&"length"!==e&&(a=b[e],d(c,g[c],a))}function d(a,b,c){for(var d="enable"!==a,e=b.length-1;e>=0;e--)if("ck12validator"!==b[e]){if(i[b[e]].indexOf(c.settings.text)>-1){c.disabled(d),c.visible(!d);break}c.disabled(!d),c.visible(d)}}function e(){var a,b=f._items;for(var c in b)b.hasOwnProperty(c)&&"length"!==c&&(a=b[c],a.disabled(!1),a.visible(!0))}var f,g,h=a.settings.contextmenu_never_use_native,i={copypaste:["Copy","Paste","Cut"],ck12link:["Insert/Edit link","Unlink"],elementbox:["Delete Element Box"],ck12validator:["View Error Info","Remove Formatting","Remove Element","Revalidate"],ck12table:["Table properties","Delete table","Row","Insert row before","Insert row after","Delete row","Cut row","Copy row","Paste row before","Paste row after","Column","Insert column before","Insert column after","Delete column"],ck12embed:["Edit Embedded Object","Delete Embedded Object"],ck12image:["Insert/Edit Image","Delete Image"],matheditor:["Select","Edit","Copy equation"],alignment:["Formats","Left","Center","Right","Justify"],ck12spellchecker:["Spell Checker"]};a.on("contextmenu",function(d){a.fire("contextmenu:reselect",{range:a.selection.getRng()});var e=a.getDoc();if(!d.ctrlKey||h){d.preventDefault(),tinymce.Env.mac&&tinymce.Env.webkit&&2===d.button&&e.caretRangeFromPoint&&a.selection.setRng(e.caretRangeFromPoint(d.x,d.y)),f?f.show():b(),a.fire("contextmenu:postrender"),g&&c();var i={x:d.pageX,y:d.pageY};a.inline&&"hybrid"===a.inline||(i=tinymce.DOM.getPos(a.getContentAreaContainer()),i.x+=d.clientX,i.y+=d.clientY),f.moveTo(i.x,i.y),f.resizeToContent()}}),a.on("contextmenu:override",function(a){(a.enable||a.disable)&&(g=a)}),a.on("contextmenu:hide",function(){f&&f.hide()})});