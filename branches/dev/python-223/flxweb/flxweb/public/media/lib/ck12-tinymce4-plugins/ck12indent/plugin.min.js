!function(){"use strict";var a="x-ck12-indent",b=["P","H3","H4","H5","PRE","SPAN"];tinymce.create("tinymce.plugins.CK12IndentPlugin",{init:function(c,d){function e(){c.fire("disable",{button:"ck12indent"}),c.fire("enable",{button:"ck12outdent"})}function f(){c.fire("enable",{button:"ck12indent"}),c.fire("disable",{button:"ck12outdent"})}function g(a){var c=a.nodeName||a;return b.indexOf(c.toUpperCase())>-1}function h(b){return b.className.indexOf(a)>-1}function i(a,b){var c=b.nodeName||b;return a.indexOf(c.toUpperCase())>-1}function j(a){return i(["DL","DT","DD"],a)}function k(a){return i(["OL","UL"],a)}c.settings.ck12_plugins_url&&(d=c.settings.ck12_plugins_url+"ck12indent"),c.addCommand("mceIndent",function(){var b=!1;tinymce.each(c.selection.getSelectedBlocks(c.selection.getStart(),c.selection.getEnd()),function(c){g(c)&&!h(c)&&(c.className+=" "+a+" ",b=!0)}),b||(c.execCommand("Indent"),c.nodeChanged())}),c.addCommand("mceOutdent",function(){var b=!1;tinymce.each(c.selection.getSelectedBlocks(c.selection.getStart(),c.selection.getEnd()),function(d){var e,f=c.dom,i=d.tagName.toUpperCase();g(i)&&d.className&&h(d)&&(d.className=d.className.replace(a,""),b=!0),("DD"===i||"DT"===i)&&(e=d.parentNode,f.split(e,d),$(d).replaceWith("<p>"+$(d).html()+"</p>"))}),b||(c.execCommand("Outdent"),c.nodeChanged())}),c.on("nodechange",function(a){var b=a.element;if(!g(b)&&a.parents&&0===a.parents.length)return void c.fire("disable",{buttons:["ck12indent","ck12outdent"]});if(b.parentNode&&"P"===b.parentNode.nodeName&&"P"===b.nodeName&&$(b).unwrap(),g(b)&&!h(b))f();else if(g(b)&&h(b))e();else if(j(b))e();else if(a&&a.parents&&a.parents.length>0)for(var d=0;d<a.parents.length;d++){var i=a.parents[d];if(g(i)&&h(i))e();else if(k(i)){var l=0;$(b).parents().each(function(){k(this)&&l++}),l>=5&&c.fire("disable",{button:"ck12indent"}),0!==l&&c.fire("enable",{button:"ck12outdent"})}else j(i)?e():f()}else f()}),c.addButton("ck12indent",{icon:"indent",title:"Increase Indent",cmd:"mceIndent","class":"mce_indent"}),c.addButton("ck12outdent",{icon:"outdent",title:"Decrease Indent",cmd:"mceOutdent","class":"mce_outdent"})},getInfo:function(){return{longname:"CK-12 Indent ",author:"Chetan Padhye",authorurl:"http://www.ck12.org",infourl:"https://insight.ck12.org/wiki/index.php/Tinymce-flxweb",version:"1.0"}}}),tinymce.PluginManager.add("ck12indent",tinymce.plugins.CK12IndentPlugin)}();